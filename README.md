# Пульт охранника банка

Проект написан на Django. 
Проект реализует следующие задачи:
- показывает список активных пропусков работника банка.
- показывает кто из работников сейчас в хранилище, время входа и сколько он там находится.
- показывает по каждому выбранному работнику перечень всех его визитов в хранилище, дату, их длительность и проверяет визиты на подозрительность.

Для запуска проекта необходимо настроить файл `settings` в папке `project`
```py
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'HOST': 'checkpoint.devman.org',
        'PORT': '5434',
        'NAME': 'checkpoint',
        'USER': 'guard',
        'PASSWORD': 'osim5',
    }
}
```

Чтобы запустить проект необходимо запустить файл `main` и результат будет на сайте http://127.0.0.1:8000/


Файл `active_passcards_view` в папке `datacenter` фильтрует базу данных и выводит список только активных сотрудников банка, т.е. текущих работников банка.
Это настраивается здесь:
```py
active_passcards = Passcard.objects.filter(is_active=True)
```

Файл `storage_information_view` в папке `datacenter` определяет кто сейчас находится в хранилище и определяет подозрителен ли данный сотрудник.
Подозрительность определяется по времени нахождения в хранилище. Если более 60 минут, то подозрителен. Это настраивается здесь:
```py
is_strange = visitor.is_visit_long(start=visitor.entered_at,
                                           finish=current_time,
                                           minutes=60)
```

Файл `passcard_info_view` в папке `datacenter` выдает все визиты данного сотрудника в хранилище и определяет каждый визит на подозрительность.
Подозрительность определяется по времени нахождения в хранилище. Если более 60 минут, то подозрителен. Это настраивается здесь:
```py
is_strange = visit.is_visit_long(start=visit.entered_at,
                                         finish=visit.leaved_at,
                                         minutes=60)
```

### Как установить

Python3 должен быть уже установлен. 
Затем используйте `pip` для установки зависимостей:
```
pip install -r requirements.txt
```

### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
